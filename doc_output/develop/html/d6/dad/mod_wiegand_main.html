<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta name="generator" content="Doxygen 1.8.8"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <title>Leosac: Wiegand Module Documentation</title>
        <!--<link href="../../tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="../../dynsections.js"></script>
        <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
        <link href="../../doxygen.css" rel="stylesheet" type="text/css" />
        <link href="../../customdoxygen.css" rel="stylesheet" type="text/css"/>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="doxy-boot.js"></script>
    </head>
    <body>
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand">Leosac </a>
                </div>
            </div>
        </nav>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div class="content" id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 panel panel-default" style="padding-bottom: 15px;">
                            <div style="margin-bottom: 15px;">
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Wiegand Module Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#mod_wiegand_intro">Introduction </a></li>
<li class="level1"><a href="#mod_wiegand_user_config">Configuration Options </a><ul><li class="level2"><a href="#mod_wiegand_example">Example </a></li>
</ul>
</li>
<li class="level1"><a href="#mod_wiegand_notes">Notes </a></li>
</ul>
</div>
<div class="textblock"><p>Explains how to configure the module to work with various Wiegand reader.</p>
<h1><a class="anchor" id="mod_wiegand_intro"></a>
Introduction </h1>
<p>This module provides support for Wiegand devices. Simply put, it listens to GPIO event, gather them, and generate Wiegand events. It supports multiple readers.</p>
<p>As this is an module that provide an authentication source (by reading card ids or PIN code, or both), it shall conforms to <a class="el" href="../../df/d33/auth_main.html#auth_specc">those specifications</a> regarding message passing.</p>
<p>There are multiple mode supported by the wiegand module. They allows the module to read from differently configured hardware, and allows you to chose what kind of credentials the module shall generate.</p>
<h1><a class="anchor" id="mod_wiegand_user_config"></a>
Configuration Options </h1>
<table class="doxtable">
<tr>
<th>Options </th><th>Options </th><th>Options </th><th>Description </th><th>Mandatory  </th></tr>
<tr>
<td>readers </td><td></td><td></td><td>Lists of all configured readers </td><td>YES </td></tr>
<tr>
<td>&mdash;&gt; </td><td>reader </td><td></td><td>Configuration of 1 wiegand reader </td><td>YES </td></tr>
<tr>
<td>&mdash;&gt; </td><td>&mdash;&gt; </td><td>name </td><td>device name </td><td>YES </td></tr>
<tr>
<td>&mdash;&gt; </td><td>&mdash;&gt; </td><td>high </td><td>name of the input GPIO that sends "high" data </td><td>YES </td></tr>
<tr>
<td>&mdash;&gt; </td><td>&mdash;&gt; </td><td>low </td><td>name of the input GPIO that sends "low" data </td><td>YES </td></tr>
<tr>
<td>&mdash;&gt; </td><td>&mdash;&gt; </td><td>green_led </td><td>name of the green led device attached to the reader </td><td>NO </td></tr>
<tr>
<td>&mdash;&gt; </td><td>&mdash;&gt; </td><td>buzzer </td><td>name of the buzzer device attached to the reader </td><td>NO </td></tr>
<tr>
<td>&mdash;&gt; </td><td>&mdash;&gt; </td><td>mode </td><td>Which mode the reader is using (see below) </td><td>NO (defaults to <code>SIMPLE_WIEGAND</code>) </td></tr>
<tr>
<td>&mdash;&gt; </td><td>&mdash;&gt; </td><td>pin_timeout </td><td>Timeout when reading a PIN code. </td><td>NO (defaults to 2500ms) </td></tr>
<tr>
<td>&mdash;&gt; </td><td>&mdash;&gt; </td><td>pin_key_end </td><td>Which key is used to signal the end of a PIN code </td><td>NO (defaults to '#') </td></tr>
</table>
<p><b>Note</b>: <code>high</code>, <code>low</code>, <code>green_led</code> and <code>buzzer</code> must be name of GPIO object: either defined using the sysfsgpio or pifacedigital module.</p>
<p>There are multiples <code>mode</code> available for a reader:</p><ol type="1">
<li><code>SIMPLE_WIEGAND</code> is for simply reading a wiegand card.</li>
<li><code>WIEGAND_PIN_4BITS</code> for reading a PIN code, when the reader send 4 bits per key pressed.</li>
<li><code>WIEGAND_PIN_8BITS</code> for reading a PIN code, when the reader send 8 bits per key pressed.</li>
<li><code>WIEGAND_PIN_BUFFERED</code> for reading a PIN code when the reader buffers up to 5key and send them in a 26 bits wiegand frame. Note that in this mode, the <code>pin_key_end</code> and <code>pin_timeout</code> parameter have no effect.</li>
<li><code>WIEGAND_CARD_PIN_4BITS</code> reads a card number followed by a PIN code read in 4bits mode.</li>
<li><code>WIEGAND_CARD_PIN_8BITS</code> reads a card number followed by a PIN code read in 8bits mode.</li>
<li><code>WIEGAND_CARD_PIN_BUFFERED</code> reads a card number followed by a PIN code read in buffered mode.</li>
<li><code>AUTODETECT</code> allows the module to read and create different type of credentials. It can read a pin code or a card number, or both. The pin code can be read if the reader is either in 4 bits or 8 bits mode. If you are doing card-only authentication, note that you will notice a delay of ~2second. This delay is here to let the user have a chance to enter his PIN code.</li>
</ol>
<dl class="section warning"><dt>Warning</dt><dd>The <code>AUTODETECT</code> mode is not compatible with the hardware Wiegand-Buffered mode.</dd></dl>
<p>You can see <a class="el" href="../../df/d33/auth_main.html#auth_data_type">this</a> for more the message passing specific specification about those modes. Note that multiple mode share a common message implementation.</p>
<p>Additional informations:</p><ul>
<li><code>pin_timeout</code> is the number of milliseconds (defaults to 2000) of inactivity on the keypad before considering the PIN code complete and sending it for processing. It's also the delay you have to enter your PIN after swiping your card.</li>
<li><code>pin_key_end</code> is the key to press to signal the end of the pin (default to '#'). This key wont be appended to the PIN code.</li>
<li>You can either type your PIN and wait, and type your PIN and the <code>pin_key_end</code>.</li>
</ul>
<h2><a class="anchor" id="mod_wiegand_example"></a>
Example </h2>
<p>This is a example of Rpleth possible configuration for Rpleth module into Leosac:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;module&gt;</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;    &lt;name&gt;WIEGAND&lt;/name&gt;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;    &lt;file&gt;libwiegand.so&lt;/file&gt;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;    &lt;level&gt;5&lt;/level&gt;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;    &lt;module_config&gt;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;        &lt;readers&gt;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;            &lt;reader&gt;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;                &lt;name&gt;MY_WIEGAND_1&lt;/name&gt;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;                &lt;high&gt;wiegand_data_high&lt;/high&gt;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;                &lt;low&gt;wiegand_data_low&lt;/low&gt;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;                &lt;green_led&gt;WIEGAND1_GREEN_LED&lt;/green_led&gt;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;                &lt;buzzer&gt;WIEGAND1_BUZZER&lt;/buzzer&gt;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;            &lt;/reader&gt;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        &lt;/readers&gt;</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;    &lt;/module_config&gt;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;&lt;/module&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="mod_wiegand_notes"></a>
Notes </h1>
<p>Technical implementations details can be found <a class="el" href="../../da/df1/namespaceLeosac_1_1Module_1_1Wiegand.html">here</a>. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated on Thu May 21 2015 10:43:44 for Leosac by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
